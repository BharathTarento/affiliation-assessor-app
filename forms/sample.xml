<?xml version="1.0"?>
<h:html xmlns="http://www.w3.org/2002/xforms" xmlns:ev="http://www.w3.org/2001/xml-events"
        xmlns:h="http://www.w3.org/1999/xhtml" xmlns:jr="http://openrosa.org/javarosa"
        xmlns:odk="http://www.opendatakit.org/xforms" xmlns:orx="http://openrosa.org/xforms"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <h:head>
        <h:title>DST Location Test</h:title>
        <model odk:xforms-version="1.0.0">
            <instance>
                <data id="dst-test" version="1">
                    <present/>
                    <trainee_location/>
                    <industry_location_lat/>
                    <industry_location_lon/>
                    <iti_location/>
                    <trainee_id>25</trainee_id>
                    <geotrace/>
                    <distance/>
                    <present_yes/>
                    <absent/>
                    <meta>
                        <instanceID/>
                    </meta>
                </data>
            </instance>
            <bind nodeset="/data/present" required="true()" type="string"/>
            <bind nodeset="/data/trainee_location" relevant="selected( /data/present , '1')" required="true()"
                  type="geopoint"/>
            <bind nodeset="/data/industry_location_lat" type="string"/>
            <bind nodeset="/data/industry_location_lon" type="string"/>
            <bind nodeset="/data/iti_location" type="string"/>
            <bind nodeset="/data/trainee_id" type="string"/>
            <bind calculate="concat( /data/iti_location , ';' ,  /data/trainee_location )" nodeset="/data/geotrace"
                  type="string"/>
            <bind calculate="distance( /data/geotrace )" nodeset="/data/distance" type="string"/>
            <bind nodeset="/data/present_yes" readonly="true()"
                  relevant="selected( /data/present , '1') and  /data/distance &lt;35000" type="string"/>
            <bind nodeset="/data/absent" readonly="true()"
                  relevant="selected( /data/present , '1') and  /data/distance &gt;=35000" type="string"/>
            <bind jr:preload="uid" nodeset="/data/meta/instanceID" readonly="true()" type="string"/>
        </model>
    </h:head>
    <h:body>
        <select1 ref="/data/present">
            <label>Are you present in the OJT Industry?</label>
            <item>
                <label>1 Yes</label>
                <value>1</value>
            </item>
            <item>
                <label>2 No</label>
                <value>2</value>
            </item>
        </select1>
        <input ref="/data/trainee_location">
            <label>Record your location.</label>
        </input>
        <input ref="/data/present_yes">
            <label>You have been marked present at OJT industry for today.</label>
        </input>
        <input ref="/data/absent">
            <label>You are not present near your OJT industry's location. Your attendance has not been marked.</label>
        </input>
    </h:body>
</h:html>
